# ODAS Audio Output Files

This directory contains audio output files generated by the ODAS (Open embeddeD Audition System) processing pipeline.

## File Formats

### Raw Audio Files

1. `postfiltered.raw`
   - Raw audio data after post-filtering
   - Format: 16-bit PCM
   - Sample Rate: 44.1 kHz (output)
   - Channels: 6 (ReSpeaker 6 Mic Array)
   - Byte Order: Little-endian
   - No header (raw PCM data)
   - Hop Size: 512 samples

2. `separated.raw`
   - Separated audio sources
   - Format: 16-bit PCM
   - Sample Rate: 44.1 kHz (output)
   - Channels: 6 (one per microphone in the array)
   - Byte Order: Little-endian
   - No header (raw PCM data)
   - Hop Size: 512 samples

## Processing Pipeline

The audio processing pipeline operates as follows:
1. Raw input is captured at 16 kHz (32-bit, 8 channels)
2. Processing is done with a hop size of 128 samples
3. Output is generated at 44.1 kHz (16-bit, 6 channels)
4. Frame size for processing is 256 samples

## Testing with KWS

The ODAS output files can be tested with various Keyword Wake-up System (KWS) test scripts:

### Basic Audio Playback
```bash
python src/odas/play_raw_audio.py data/audio/odas/postfiltered.raw
```

### Testing with Picovoice
```bash
python src/odas/test_picovoice_raw_file.py \
    --audio-file data/audio/odas/postfiltered.raw \
    --access-key YOUR_PICOVOICE_ACCESS_KEY \
    --sample-rate 44100 \
    --channels 6
```

### Testing Wake Word Detection (Porcupine)
```bash
python src/odas/test_porcupine_file.py \
    --audio-file data/audio/odas/postfiltered.raw \
    --access-key YOUR_PICOVOICE_ACCESS_KEY
```

### Testing Intent Recognition (Rhino)
```bash
python src/odas/test_rhino_file.py \
    --audio-file data/audio/odas/postfiltered.raw \
    --access-key YOUR_PICOVOICE_ACCESS_KEY
```

Note: When testing with Picovoice-based systems:
- The audio will be automatically resampled to 16 kHz (required by Picovoice)
- Only the first channel will be used for processing
- Make sure to use your Picovoice access key
- The test scripts will automatically handle the raw PCM format

## Notes

- Raw audio files are continuously updated during ODAS operation
- Files are written in real-time as audio is processed
- The system maintains a circular buffer to prevent disk space issues
- Audio data is stored in 16-bit PCM format for maximum compatibility
- The system uses a ReSpeaker 6 Mic Array in a circular configuration (R = 0.0463m)
- Input processing uses 32-bit samples internally for higher precision
